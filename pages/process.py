import streamlit as st
import requests
import json

if st.session_state.token:  # Check if token is present
    send = st.button("send")

    if send:
        data = {
            "data": '{"columns":[{"name":"_id","datatype":"String","bit_settings":"","values":["<dbpedia:Parabolic_reflector>"]},{"name":"title","datatype":"String","bit_settings":"","values":["Parabolic reflector"]},{"name":"text","datatype":"String","bit_settings":"","values":["A parabolic (or paraboloid or paraboloidal) reflector (or dish or mirror) is a reflective surface used to collect or project energy such as light, sound, or radio waves. Its shape is part of a circular paraboloid, that is, the surface generated by a parabola revolving around its axis. The parabolic reflector transforms an incoming plane wave traveling along the axis into a spherical wave converging toward the focus."]},{"name":"text-embedding-3-small-512-embedding","datatype":{"List":"Float64"},"bit_settings":"","values":[{"name":"","datatype":"Float64","bit_settings":"","values":[0.0012455350952222943,-0.02759833075106144,0.007902429439127445,0.03539646416902542,-0.003804798936471343,0.0755424052476883,0.001124190748669207,-0.021308477967977524,0.05455483868718147,0.012956774793565273,-0.05137782171368599,-0.026747917756438255,0.042360227555036545,0.0003387113392818719,0.025191498920321465,-0.006253749597817659,0.012748182751238346,-0.043387144804000854,-0.04175049811601639,0.04505588114261627,0.010004394687712193,-0.05028672516345978,-0.0668136328458786,0.014649579301476479,-0.038445115089416504,0.036712199449539185,-0.006682967767119408,0.06424634903669357,0.04832917079329491,0.00015932721726130694,-0.012258793227374554,-0.01716872863471508,-0.006951730698347092,-0.06495235115289688,-0.037803295999765396,0.016254132613539696,-0.02610609494149685,-0.027871105819940567,-0.016125768423080444,0.0661718100309372,0.02108384110033512,0.05124945938587189,-0.005627973470836878,-0.05121736600995064,-0.025977730751037598,-0.03039025515317917,-0.05631985142827034,0.025881458073854446,0.04929190129041672,0.013293731026351452,-0.006542569492012262,0.035813648253679276,0.048938900232315063,0.049933724105358124,0.05211591720581055,-0.017746368423104286,-0.09152376651763916,0.0759275034070015,-0.008640523999929428,-0.032861270010471344,0.05500411614775658,0.06873910129070282,0.049099355936050415,0.03886229917407036,-0.0665569081902504,0.027887150645256042,-0.06386125087738037,0.07483640313148499,-0.0036563777830451727,0.03626292198896408,0.08029188960790634,0.06033123657107353,-0.03982503339648247,-0.036680106073617935,0.010718422010540962,0.008447977714240551,0.033727727830410004,-0.06427843868732452,0.037514474242925644,-0.0330859050154686,0.026282597333192825,0.015307446010410786,-0.00032918431679718196,0.013887415640056133,-0.012555636465549469,-0.04595442861318588,0.05988195911049843,0.011079446412622929,-0.04367596283555031,0.023121625185012817,0.009635347872972488,-0.05035090819001198,0.0014942410634830594,0.010533898137509823,-0.006791275460273027,-0.02676396258175373,-0.08138298243284225,-0.011681154370307922,0.03841302543878555,0.09633743017911911,0.019286740571260452,0.010301237925887108,-0.06456726044416428,0.02952379547059536,0.07329603284597397,-0.0262344591319561,-0.019736016169190407,-0.05118527635931969,0.034850914031267166,-0.041429586708545685,0.002294512465596199,-0.025063134729862213,0.07868733257055283,-0.06828982383012772,0.007958588190376759,0.05423393100500107,0.05429811030626297,-0.021533116698265076,-0.03061489202082157,0.0064823986031115055,0.016751544550061226,0.007617620751261711,0.04556933790445328,-0.01850050874054432,0.039664577692747116,-0.02766251377761364,0.05949686840176582,-0.03231571987271309,0.05510038882493973,0.008295544423162937,0.08786538243293762,0.01364673301577568,0.004516819957643747,-0.0949896052479744,0.03536437451839447,-0.0236832182854414,0.0335351824760437,-0.026908373460173607,0.006053180433809757,0.04701343551278114,0.0383809357881546,0.07881569862365723,0.0335351824760437,-0.04797616973519325,0.00973162055015564,0.026651643216609955,0.019206512719392776,-0.02281676046550274,0.057763949036598206,-0.008066895417869091,-0.004163817968219519,0.009418732486665249,-0.06325152516365051,0.05734676495194435,0.001003849203698337,0.01594124548137188,0.042969960719347,-0.014416919089853764,-0.027004646137356758,0.016719454899430275,-0.041397497057914734,-0.049003083258867264,-0.11353825032711029,-0.004115681163966656,-0.0025452240370213985,-0.012146474793553352,0.005499609280377626,0.022560030221939087,-0.05554966256022453,-0.005764360539615154,-0.09659415483474731,0.02201448194682598,-0.07329603284597397,0.005142596084624529,-0.01120781060308218,0.05038299784064293,0.03969666734337807,-0.07072874903678894,-0.009041662327945232,-0.05654448643326759,-0.0017008273862302303,-0.03706520050764084,0.04104449599981308,-0.09133122116327286,0.07894406467676163,0.003162977285683155,-0.026074005290865898,-0.004340318962931633,-0.01813146099448204,-0.020778976380825043,-0.022207029163837433,0.07085710763931274,0.06527326256036758,-0.01577276736497879,-0.019447196274995804,-0.03745029494166374,0.0667494535446167,-0.03754656761884689,-0.03655174374580383,-0.05914386361837387,-0.02769460342824459,-0.013390004634857178,-0.01494642160832882,-0.009498960338532925,-0.03982503339648247,-0.01123990211635828,0.0863250121474266,-0.04977326840162277,0.05112109333276749,-0.006033123470842838,0.028111787512898445,0.006113351322710514,0.01507478579878807,0.03886229917407036,-0.042360227555036545,-0.000538027030415833,0.03501136973500252,-0.02719719335436821,-0.026812098920345306,0.051024820655584335,-0.03635919466614723,0.04351550713181496,0.020714793354272842,0.045248426496982574,-0.04691716283559799,0.07181984186172485,0.02381158247590065,-0.053913019597530365,-0.004468683153390884,0.060459598898887634,-0.07932915538549423,-0.05112109333276749,0.04213559255003929,0.047141801565885544,-0.003010544693097472,0.023169761523604393,-0.09171631187200546,-0.005571814253926277,-0.015195127576589584,-0.026025867089629173,-0.018612828105688095,0.06193578988313675,0.00888120662420988,0.005792440380901098,-0.00640217075124383,0.023201853036880493,0.02434108592569828,-0.030775347724556923,0.07913661003112793,0.0308876670897007,0.07759623974561691,0.044414058327674866,-0.036583833396434784,0.003710531396791339,0.06106932833790779,0.05635194107890129,-0.05689748749136925,-0.03051861934363842,-0.032764993607997894,-0.02610609494149685,0.006366068497300148,0.028448743745684624,-0.029973071068525314,0.08318008482456207,0.00415980676189065,0.02719719335436821,-0.03619874268770218,-0.06899582594633102,-0.032058991491794586,-0.032989632338285446,0.043322961777448654,-0.01055796630680561,0.11251133680343628,-0.001865294179879129,-0.003999351058155298,0.01729709282517433,-0.003223148174583912,-0.02467804215848446,0.015764744952321053,-0.02207866497337818,0.011328152380883694,-0.02775878645479679,-0.015018627047538757,-0.014023803174495697,0.014906307682394981,-0.042456503957509995,0.018147507682442665,0.03128880634903908,-0.02968425117433071,-0.06389334797859192,0.06925255805253983,-0.032492220401763916,-0.045248426496982574,0.026956509798765182,0.013061070814728737,-0.009892076253890991,-0.002934328280389309,-0.0007014910224825144,0.037514474242925644,-0.030406299978494644,0.08760865777730942,0.01776241324841976,0.0663001760840416,0.021180113777518272,-0.058662500232458115,0.0035099622327834368,0.039439938962459564,0.038798119872808456,0.03648756071925163,-0.08902066200971603,0.0476873479783535,0.013197457417845726,-0.03789956867694855,-0.044285692274570465,-0.07214075326919556,0.019270695745944977,0.0012696034973487258,0.03035816363990307,-0.011456516571342945,-0.01334989070892334,-0.023972038179636,-0.03132089599967003,-0.011095492169260979,0.013470231555402279,0.06379707157611847,-0.011280015110969543,-0.10968732088804245,-0.026025867089629173,0.023362308740615845,0.01366277877241373,0.11661899089813232,0.01544383354485035,-0.04865008220076561,0.014914331026375294,-0.011986019089818,-0.05619148537516594,0.03408072888851166,-0.08876393735408783,-0.02949170395731926,-0.047141801565885544,-0.04643579572439194,0.013454186730086803,-0.048264987766742706,0.0573146715760231,-0.037739112973213196,0.0191262848675251,0.02085920423269272,-0.00027101923478767276,-0.03270081430673599,0.027646467089653015,-0.04001757875084877,-0.017618004232645035,0.0035099622327834368,0.03510764241218567,0.09973908215761185,0.04457451403141022,0.023137670010328293,-0.12470594793558121,-0.02018529176712036,0.019543468952178955,0.002368723042309284,0.00510649336501956,0.010838762857019901,0.01448110118508339,-0.02341044507920742,0.0959523394703865,0.0168317724019289,-0.03552482649683952,-0.030133526772260666,0.010405533947050571,-0.044285692274570465,0.03424118459224701,-0.08080534636974335,-0.02049015648663044,0.0010479744523763657,-0.0007972628227435052,0.07368112355470657,-0.025480318814516068,-0.023859720677137375,0.021501025184988976,-0.02381158247590065,-0.05609521269798279,-0.13131670653820038,0.0009752680780366063,-0.022624213248491287,0.030310027301311493,0.004021413624286652,-0.02231934852898121,-0.05060763657093048,0.009354550391435623,0.0526614673435688,-0.026186322793364525,0.028865927830338478,0.000725559308193624,0.08869975060224533,0.05619148537516594,-0.04515215381979942,0.08343681693077087,-0.0027778842486441135,0.029507750645279884,-0.04197513684630394,-0.0668778195977211,-0.004312239121645689,-0.026908373460173607,0.02151707001030445,0.043322961777448654,0.036583833396434784,0.028336426243185997,0.019912516698241234,-0.06036332622170448,0.095374695956707,-0.07271838933229446,0.053078651428222656,-0.012210656888782978,0.04120495170354843,-0.022768622264266014,-0.03607037663459778,-0.05035090819001198,-0.06004241481423378,-0.029267067089676857,-0.00876888819038868,-0.03350308910012245,-0.036712199449539185,-0.004909935407340527,-0.008504136465489864,0.07329603284597397,0.013751029036939144,0.10724839568138123,-0.04560142755508423,-0.03141716867685318,0.044317785650491714,0.04499169811606407,0.07894406467676163,0.013245594687759876,-0.018019143491983414,-0.024389222264289856,0.009073753841221333,0.011528721079230309,-0.07175566256046295,0.0618395172059536,-0.019078148528933525,-0.01903001219034195,-0.05510038882493973,0.037674929946660995,-0.07952170073986053,-0.024758270010352135,0.030903711915016174,0.06026705354452133,-0.0670703649520874,-0.030245846137404442,0.027582285925745964,0.03815629705786705,0.02560868300497532,0.05250101163983345,-0.005162653047591448,-0.05792440474033356,0.1137949749827385,0.025624729692935944,-0.033214271068573,-0.025255681946873665,0.09280741214752197,0.014368781819939613,-0.011215833015739918,-0.09896890074014664,0.06379707157611847,0.024581769481301308,0.06848236918449402,0.04027430713176727,-0.07464385777711868,-0.06103723868727684,-0.09441196173429489,-0.017874732613563538,0.11186951398849487,-0.002408836968243122,-0.01603751815855503,0.014192281290888786,0.012347044423222542,-0.018083324655890465,0.03436955064535141,-0.029267067089676857,0.07913661003112793,0.005800463259220123,0.014713761396706104,-0.04081985726952553,-0.007192413788288832,-0.0033254383597522974,-0.04858589917421341,-0.03883020952343941,-0.0213887058198452,0.03895857557654381,-0.0017228899523615837,-0.025544501841068268,0.0573788546025753,-0.010204964317381382,0.03603828698396683,-0.0573788546025753,-0.1329854428768158,0.0015734658809378743,0.03629501536488533,0.04829707741737366,0.013141298666596413,0.004360375925898552,-0.05410556495189667,0.06004241481423378,0.10795440524816513,0.040595218539237976,0.02095547690987587,0.03902275487780571,-0.0054594953544437885,0.019816244021058083,0.018548645079135895,-0.03517182543873787]}]}]}'
        }
        data = data["data"]
        unwrapped_data = json.loads(data)["columns"]
        data_dict = {d["name"]: d["values"][0] for d in unwrapped_data}
        st.dataframe(data_dict)
        # r = requests.post(
        #     "http://localhost:8000/protected",
        #     headers={"Authorization": f"Bearer {st.session_state.token}"},
        # )
        # if r.status_code == 200:
        #     st.write("Done.")
        #     r.encoding = "utf-8"
        #     res = r.text
        #     st.write(res)
        # else:
        #     st.write(f"An error occured. Error: {r.status_code} - {r.text}")
else:
    st.warning("Please log in")
